<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css" rel="stylesheet" />
    <title>View All Barang</title>

</head>


<body>
    <div class="container-fluid">
        <div class="row">
            <div th:replace="~{fragments/sidebarf}" class="col-lg-3 col-md-4"></div>
            <div class="col">

                <div class="container">
                    <div class="card m-4 p-4 shadow-lg p-3 mb-5 bg-white rounded">
                        <div class="card-body">
                            <div class="text-center">
                                <h2> Daftar Barang</h2>
                                <div class="text-center m-3">
                                    <a type="button" class="btn btn-md btn-primary" href="/barang/tambah">+ Tambah
                                        Barang</a>
                                </div>
                            </div>

                            <br>

                            <!-- Penambahan card jika ada barang dengan stok kurang dari standar -->
                            <div th:if="${adaBarangDenganStokKurangDariStandar}">
                                <div class="card border-warning mb-3" style="max-width: 22rem;">

                                    <div class="card-body">
                                        <p class="card-text">
                                            <i class="fas fa-lightbulb fa-2x text-warning me-2"></i>
                                            Ada
                                            <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                                <!-- Tambahkan id modal di sini -->
                                                <span th:text="${listBarangStokKurang.size()}"></span> barang
                                            </a> yang memiliki stok rendah
                                        </p>
                                    </div>
                                </div>
                            </div>


                            <!-- Modal -->
                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog modal-lg modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Daftar Barang dengan Stok Rendah</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <table id="table" class="table table-bordered text-center">
                                                <thead style="background-color: #ffc023">
                                                    <tr>
                                                        <th scope="col">#</th>
                                                        <th scope="col">Code Barang</th>
                                                        <th scope="col">Nama</th>
                                                        <th scope="col">Tipe Barang</th>
                                                        <th scope="col">Stok</th>
                                                        <th scope="col">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!-- Gunakan Thymeleaf untuk mengulang melalui daftar barang -->
                                                    <tr th:each="barang, iterStat : ${listBarangStokKurang}">
                                                        <td th:text="${iterStat.index + 1}"></td>
                                                        <td th:text="${barang.kodeBarang}"></td>
                                                        <td th:text="${barang.namaBarang}"></td>
                
                                                        <!-- Disini saya ingin menampilkan tipe barang -->
                                                        <td th:text="${barang.tipeBarang == 1 ? 'Alat' : 'Material'}"></td>
                
                                                        <td th:text="${barang.stokBarang}"></td>
                
                
                
                                                        <td>
                                                            <a type="button" class="btn btn-sm btn-secondary"
                                                                th:href="@{/barang/{idBarang}(idBarang=${barang.kodeBarang})}">Detail</a>
                                                        </td>
                
                                                    </tr>
                
                
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <table id="table" class="table table-bordered text-center">
                                <thead style="background-color: #ffc023">
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Code Barang</th>
                                        <th scope="col">Nama</th>
                                        <th scope="col">Tipe Barang</th>
                                        <th scope="col">Stok</th>
                                        <th scope="col">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Gunakan Thymeleaf untuk mengulang melalui daftar barang -->
                                    <tr th:each="barang, iterStat : ${listBarang}" th:if="${!barang.isDeleted}">
                                        <td th:text="${iterStat.index + 1}"></td>
                                        <td th:text="${barang.kodeBarang}"></td>
                                        <td th:text="${barang.namaBarang}"></td>

                                        <!-- Disini saya ingin menampilkan tipe barang -->
                                        <td th:text="${barang.tipeBarang == 1 ? 'Alat' : 'Material'}"></td>

                                        <td th:text="${barang.stokBarang}"></td>



                                        <td>
                                            <a type="button" class="btn btn-sm btn-secondary"
                                                th:href="@{/barang/{idBarang}(idBarang=${barang.kodeBarang})}">Detail</a>
                                        </td>

                                    </tr>


                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
<script>
    $(document).ready(function () {
        $("#table").DataTable();
    });
</script>


</html>